# How to Import Student Data into Ministry Hub Sync

## Step 1: Create the Batch Import Function in Supabase

1. Go to [Supabase Dashboard](https://app.supabase.com/)
2. Log in to your account
3. Select your project (dlvojolvdsqrfczjjjuw)
4. In the left sidebar, click on "SQL Editor"
5. Copy the entire content from `supabase/migrations/20250917080000_create_batch_student_import_function.sql`
6. Paste it into the SQL Editor
7. Click "Run" to execute the SQL

## Step 2: Import the Student Data

After creating the function, you can import the student data using the generated SQL commands.

The script has already generated all the SQL commands needed to import your student data in batches. Each command looks like this:

```sql
SELECT * FROM process_estudantes_batch('[{"id":"...", "nome":"...", ...}]'::JSONB);
```

You can execute these commands one by one in the Supabase SQL Editor.

## Alternative Method: Using the Generated Commands

If you prefer, you can also use the commands that were generated by the `generate_import_commands.js` script:

1. Run `node generate_import_commands.js` in your terminal
2. Copy the generated SQL commands
3. Paste and execute them in the Supabase SQL Editor

## Verification

After importing the data, you can verify it was imported correctly by running:

```sql
SELECT COUNT(*) FROM estudantes;
SELECT COUNT(*) FROM profiles;
```

This should show 101 students and 101 profiles (based on your data).

## Troubleshooting

If you encounter any issues:

1. Make sure you're using the correct project in Supabase
2. Ensure you have the necessary permissions (service role key)
3. Check that the tables `estudantes` and `profiles` exist in your database
4. If there are any errors, they will be returned by the function and will help you identify what needs to be fixed